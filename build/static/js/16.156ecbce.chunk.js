(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[16],{201:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"d",(function(){return f})),a.d(t,"g",(function(){return b})),a.d(t,"c",(function(){return v})),a.d(t,"e",(function(){return y})),a.d(t,"f",(function(){return E}));var n=a(9),r=a.n(n),s=a(14),c=a(15),l=a.n(c),o=a(38),i=a(10),u=a(34),d=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,d,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.b}),s={withCredentials:!0,headers:{"Content-Type":"application/json"}},t.next=5,l.a.post("/api/orders",e,s);case 5:c=t.sent,d=c.data,a({type:i.d,payload:d}),a({type:o.b,payload:d}),localStorage.removeItem("cartItems"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),"Not authorized, token failed"===(p=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(u.f)()),a({type:i.a,payload:p});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,o,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.e}),s={withCredentials:!0},t.next=5,l.a.delete("/api/orders/".concat(e),s);case 5:c=t.sent,o=c.data,a({type:i.f,payload:o}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),u=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,a({type:i.y,payload:u});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},m=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n,s){var c,o,d,p;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:i.z}),c={withCredentials:!0},a.next=5,l.a.patch("/api/orders/".concat(e),t,c);case 5:o=a.sent,d=o.data,n({type:i.B,payload:d}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),"Not authorized, token failed"===(p=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message)&&n(Object(u.f)()),n({type:i.y,payload:p});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,o,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.l}),s={withCredentials:!0},t.next=5,l.a.get("/api/orders/".concat(e),s);case 5:c=t.sent,o=c.data,a({type:i.m,payload:o}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(u.f)()),a({type:i.k,payload:d});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},b=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n,s){var c,o,d,p;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:i.v}),c={withCredentials:!0,headers:{"Content-Type":"application/json"}},a.next=5,l.a.put("/api/orders/".concat(e,"/pay"),t,c);case 5:o=a.sent,d=o.data,n({type:i.x,payload:d}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),"Not authorized, token failed"===(p=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message)&&n(Object(u.f)()),n({type:i.u,payload:p});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,o,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.h}),s={withCredentials:!0},t.next=5,l.a.put("/api/orders/".concat(e._id,"/deliver"),{},s);case 5:c=t.sent,o=c.data,a({type:i.j,payload:o}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(u.f)()),a({type:i.g,payload:d});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},y=function(){return function(){var e=Object(s.a)(r.a.mark((function e(t,a){var n,s,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.p}),n={withCredentials:!0},e.next=5,l.a.get("/api/orders/myorders",n);case 5:s=e.sent,c=s.data,t({type:i.r,payload:c}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),"Not authorized, token failed"===(o=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(Object(u.f)()),t({type:i.o,payload:o});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,o,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.s}),s={withCredentials:!0,params:e},t.next=5,l.a.get("/api/orders",s);case 5:c=t.sent,o=c.data.orders,a({type:i.t,payload:o}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(u.f)()),a({type:i.n,payload:d});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}},248:function(e,t,a){"use strict";var n=a(1),r=a(2),s=a(4),c=a.n(s),l=a(0),o=a.n(l),i=a(5),u=o.a.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,l=e.striped,u=e.bordered,d=e.borderless,p=e.hover,m=e.size,f=e.variant,b=e.responsive,v=Object(r.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),y=Object(i.a)(a,"table"),E=c()(s,y,f&&y+"-"+f,m&&y+"-"+m,l&&y+"-striped",u&&y+"-bordered",d&&y+"-borderless",p&&y+"-hover"),h=o.a.createElement("table",Object(n.a)({},v,{className:E,ref:t}));if(b){var g=y+"-responsive";return"string"===typeof b&&(g=g+"-"+b),o.a.createElement("div",{className:g},h)}return h}));t.a=u},658:function(e,t,a){"use strict";a.r(t);var n=a(72),r=a(0),s=a.n(r),c=a(170),l=a.n(c),o=a(164),i=a(106),u=a(165),d=a(107),p=a(248),m=a(379),f=a(153),b=a(27),v=a(22),y=a(50),E=a(37),h=a(34),g=a(201),j=a(6);t.default=function(e){e.location;var t=e.history,a=Object(r.useState)(""),c=Object(n.a)(a,2),O=c[0],w=c[1],N=Object(r.useState)(""),k=Object(n.a)(N,2),C=k[0],x=k[1],D=Object(r.useState)(""),z=Object(n.a)(D,2),L=z[0],S=z[1],A=Object(r.useState)(""),P=Object(n.a)(A,2),I=P[0],T=P[1],G=Object(r.useState)(""),M=Object(n.a)(G,2),_=M[0],F=M[1],Y=Object(r.useState)(""),U=Object(n.a)(Y,2),R=U[0],B=U[1],H=Object(r.useState)(""),q=Object(n.a)(H,2),J=q[0],V=q[1],W=Object(r.useState)(null),$=Object(n.a)(W,2),K=$[0],Q=$[1],X=Object(r.useState)(!1),Z=Object(n.a)(X,2),ee=Z[0],te=Z[1],ae=Object(r.useState)(!1),ne=Object(n.a)(ae,2),re=ne[0],se=ne[1],ce=Object(v.b)(),le=Object(v.c)((function(e){return e.userDetails})),oe=le.loading,ie=le.error,ue=le.user,de=Object(v.c)((function(e){return e.userDelete})),pe=de.loading,me=de.success,fe=Object(v.c)((function(e){return e.userLogin})).userInfo,be=Object(v.c)((function(e){return e.userUpdateProfile})).success,ve=Object(v.c)((function(e){return e.orderListMy})),ye=ve.loading,Ee=ve.error,he=ve.orders,ge=Object(r.useState)(!1),je=Object(n.a)(ge,2),Oe=je[0],we=je[1];Object(r.useEffect)((function(){ce(Object(g.e)())}),[ce]),Object(r.useEffect)((function(){me&&setTimeout((function(){ce(Object(h.f)())}),2e3),fe?fe&&fe.firstName&&!be?(w(fe.firstName),x(fe.middleName),S(fe.lastName),T(fe.phone),F(fe.email)):(ce({type:j.y}),ce(Object(h.b)("profile"))):t.push("/login")}),[ce,me,t,fe,be,he]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,null,s.a.createElement(i.a,{md:3},s.a.createElement("h2",null,"User Profile"),K&&s.a.createElement(y.a,{variant:"danger"},K),be&&s.a.createElement(y.a,{variant:"success"},"Profile Updated"),oe?s.a.createElement(E.a,null):ie?s.a.createElement(y.a,{variant:"danger"},ie):s.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),R!==J?Q("Passwords do not match"):ce(""!==R?Object(h.i)({id:ue._id,firstName:O,middleName:C,lastName:L,phone:I,email:_,password:R}):Object(h.i)({id:ue._id,firstName:O,middleName:C,lastName:L,phone:I,email:_}))}},s.a.createElement(u.a.Group,null,s.a.createElement(u.a.Label,null,"First Name"),s.a.createElement(u.a.Control,{type:"Fisrtname",placeholder:"Enter First Name",value:O,onChange:function(e){return w(e.target.value)}})),s.a.createElement(u.a.Group,null,s.a.createElement(u.a.Label,null,"Middle Name"),s.a.createElement(u.a.Control,{type:"MiddleName",placeholder:"Enter Middle Name",value:C,onChange:function(e){return x(e.target.value)}})),s.a.createElement(u.a.Group,null,s.a.createElement(u.a.Label,null,"Last Name"),s.a.createElement(u.a.Control,{type:"Lastname",placeholder:"Enter Last Name",value:L,onChange:function(e){return S(e.target.value)}})),s.a.createElement(u.a.Group,null,s.a.createElement(u.a.Label,null,"phone"),s.a.createElement(u.a.Control,{type:"tel",pattern:"^(09|\\+639)\\d{9}$",placeholder:"E.g 09123456789",value:I,onChange:function(e){return T(e.target.value)}})),s.a.createElement(u.a.Group,null,s.a.createElement(u.a.Label,null,"Email Address"),s.a.createElement(u.a.Control,{type:"email",placeholder:"Enter email",value:_,onChange:function(e){return F(e.target.value)}})),s.a.createElement(u.a.Group,{controlId:"password"},s.a.createElement(u.a.Label,null,"Password"),s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(u.a.Control,{type:ee?"text":"password",placeholder:"Enter password",value:R,onChange:function(e){return B(e.target.value)}}),s.a.createElement(d.a,{variant:"link",onClick:function(e){e.preventDefault(),te(!ee)},style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)"}},s.a.createElement("i",{className:"fas fa-eye".concat(ee?"":"-slash")})))),s.a.createElement(u.a.Group,{controlId:"confirmPassword"},s.a.createElement(u.a.Label,null,"Confirm Password"),s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(u.a.Control,{type:re?"text":"password",placeholder:"Confirm password",value:J,onChange:function(e){return V(e.target.value)}}),s.a.createElement(d.a,{variant:"link",onClick:function(e){e.preventDefault(),se(!re)},style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)"}},s.a.createElement("i",{className:"fas fa-eye".concat(re?"":"-slash")})))),s.a.createElement(d.a,{type:"button",variant:"primary",onClick:function(e){return we(!0)},size:"sm",style:{marginRight:"10px"}},"Delete Account"),s.a.createElement(d.a,{type:"submit",variant:"primary",size:"sm"},"Update"))),s.a.createElement(i.a,{md:9},s.a.createElement("h2",null,"My Orders"),ye?s.a.createElement(E.a,null):Ee?s.a.createElement(y.a,{variant:"danger"},Ee):s.a.createElement(p.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"ID"),s.a.createElement("th",null,"DATE"),s.a.createElement("th",null,"PURCHASED"),s.a.createElement("th",null,"TOTAL"),s.a.createElement("th",null,"PAID"),s.a.createElement("th",null,"DELIVERED"),s.a.createElement("th",null))),s.a.createElement("tbody",null,he.map((function(e){return s.a.createElement("tr",{key:e._id},s.a.createElement("td",null,e._id),s.a.createElement("td",null,l()(e.createdAt).format("MM-DD-YYYY h:mmA")),s.a.createElement("td",null,"".concat(e.orderItems.reduce((function(e,t){return e+t.qty}),0)," item").concat(e.orderItems.reduce((function(e,t){return e+t.qty}),0)>1?"s":"")),s.a.createElement("td",null," ",s.a.createElement("span",{className:"currency"},e.totalPrice)),s.a.createElement("td",null,e.isPaid?e.paidAt.substring(0,10):s.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),s.a.createElement("td",null,e.isDelivered?e.deliveredAt.substring(0,10):s.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),s.a.createElement("td",null,s.a.createElement(b.LinkContainer,{to:"/order/".concat(e._id)},s.a.createElement(d.a,{className:"btn-sm",variant:"light"},"Details"))))}))))),s.a.createElement(m.a,{show:Oe,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return we(!1)}},s.a.createElement(m.a.Header,{closeButton:!0},s.a.createElement(m.a.Title,{id:"contained-modal-title-vcenter"},s.a.createElement("i",{className:"fas fa-trash"})," Deleting your dabestdeal account ?")),s.a.createElement(m.a.Body,{style:{textAlign:"center"}},pe?s.a.createElement(f.a,{animation:"grow",style:{color:"#258085"}}):me?s.a.createElement(y.a,{variant:"success"},"Account Deleted!"):s.a.createElement(s.a.Fragment,null," ",s.a.createElement(y.a,null,"This is permanent. When you delete your account, you won't be able to access your previous orders or view your transactions."),s.a.createElement(u.a.Text,null,s.a.createElement("strong",null,"Note: Orders sent for delivery will still be delivered.")))),s.a.createElement(m.a.Footer,null,s.a.createElement(d.a,{variant:"primary",onClick:function(){return we(!1)},size:"sm"},"Cancel"),s.a.createElement(d.a,{variant:"primary",size:"sm",onClick:function(e){console.log("click"),ce(Object(h.a)(fe._id))}},"Continue to Account Deletion")))))}}}]);