(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[11],{201:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"h",(function(){return d})),a.d(t,"d",(function(){return f})),a.d(t,"g",(function(){return h})),a.d(t,"c",(function(){return v})),a.d(t,"e",(function(){return E})),a.d(t,"f",(function(){return y}));var n=a(9),r=a.n(n),s=a(14),c=a(15),l=a.n(c),i=a(38),o=a(10),p=a(34),u=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,u,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.b}),s={withCredentials:!0,headers:{"Content-Type":"application/json"}},t.next=5,l.a.post("/api/orders",e,s);case 5:c=t.sent,u=c.data,a({type:o.d,payload:u}),a({type:i.b,payload:u}),localStorage.removeItem("cartItems"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),"Not authorized, token failed"===(m=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(p.f)()),a({type:o.a,payload:m});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,i,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.e}),s={withCredentials:!0},t.next=5,l.a.delete("/api/orders/".concat(e),s);case 5:c=t.sent,i=c.data,a({type:o.f,payload:i}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),p=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,a({type:o.y,payload:p});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},d=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n,s){var c,i,u,m;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:o.z}),c={withCredentials:!0},a.next=5,l.a.patch("/api/orders/".concat(e),t,c);case 5:i=a.sent,u=i.data,n({type:o.B,payload:u}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),"Not authorized, token failed"===(m=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message)&&n(Object(p.f)()),n({type:o.y,payload:m});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.l}),s={withCredentials:!0},t.next=5,l.a.get("/api/orders/".concat(e),s);case 5:c=t.sent,i=c.data,a({type:o.m,payload:i}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(u=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(p.f)()),a({type:o.k,payload:u});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},h=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n,s){var c,i,u,m;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:o.v}),c={withCredentials:!0,headers:{"Content-Type":"application/json"}},a.next=5,l.a.put("/api/orders/".concat(e,"/pay"),t,c);case 5:i=a.sent,u=i.data,n({type:o.x,payload:u}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),"Not authorized, token failed"===(m=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message)&&n(Object(p.f)()),n({type:o.u,payload:m});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.h}),s={withCredentials:!0},t.next=5,l.a.put("/api/orders/".concat(e._id,"/deliver"),{},s);case 5:c=t.sent,i=c.data,a({type:o.j,payload:i}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(u=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(p.f)()),a({type:o.g,payload:u});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},E=function(){return function(){var e=Object(s.a)(r.a.mark((function e(t,a){var n,s,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.p}),n={withCredentials:!0},e.next=5,l.a.get("/api/orders/myorders",n);case 5:s=e.sent,c=s.data,t({type:o.r,payload:c}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),"Not authorized, token failed"===(i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(Object(p.f)()),t({type:o.o,payload:i});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,c,i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.s}),s={withCredentials:!0,params:e},t.next=5,l.a.get("/api/orders",s);case 5:c=t.sent,i=c.data.orders,a({type:o.t,payload:i}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(u=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(p.f)()),a({type:o.n,payload:u});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}},218:function(e,t,a){"use strict";var n=a(1),r=a(2),s=a(4),c=a.n(s),l=a(0),i=a.n(l),o=(a(42),a(23)),p=a(5),u=a(74),m=a(73),d=a(17),f={variant:void 0,active:!1,disabled:!1},h=i.a.forwardRef((function(e,t){var a=e.bsPrefix,s=e.active,o=e.disabled,u=e.className,f=e.variant,h=e.action,v=e.as,E=e.eventKey,y=e.onClick,b=Object(r.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);a=Object(p.a)(a,"list-group-item");var g=Object(l.useCallback)((function(e){if(o)return e.preventDefault(),void e.stopPropagation();y&&y(e)}),[o,y]);return i.a.createElement(m.a,Object(n.a)({ref:t},b,{eventKey:Object(d.b)(E||null,b.href),as:v||(h?b.href?"a":"button":"div"),onClick:g,className:c()(u,a,s&&"active",o&&"disabled",f&&a+"-"+f,h&&a+"-action")}))}));h.defaultProps=f,h.displayName="ListGroupItem";var v=h,E={variant:void 0,horizontal:void 0},y=i.a.forwardRef((function(e,t){var a,s=Object(o.a)(e,{activeKey:"onSelect"}),l=s.className,m=s.bsPrefix,d=s.variant,f=s.horizontal,h=s.as,v=void 0===h?"div":h,E=Object(r.a)(s,["className","bsPrefix","variant","horizontal","as"]),y=Object(p.a)(m,"list-group");return a=f?!0===f?"horizontal":"horizontal-"+f:null,i.a.createElement(u.a,Object(n.a)({ref:t},E,{as:v,className:c()(l,y,d&&y+"-"+d,a&&y+"-"+a)}))}));y.defaultProps=E,y.displayName="ListGroup",y.Item=v;t.a=y},221:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(161),c=a(27);t.a=function(e){var t=e.step1,a=e.step2,n=e.step3,l=e.step4;return r.a.createElement(s.a,{className:"justify-content-center mb-4 stepper"},r.a.createElement(s.a.Item,null,t?r.a.createElement(c.LinkContainer,{to:"/login"},r.a.createElement(s.a.Link,null,r.a.createElement("div",{className:"step-no active"},"1"),r.a.createElement("i",{className:"fas fa-sign-in-alt"})," Sign In")):r.a.createElement(s.a.Link,{disabled:!0},r.a.createElement("div",{className:"step-no"},"1")," ",r.a.createElement("i",{className:"fas fa-sign-in-alt"})," Sign In")),r.a.createElement(s.a.Item,null,a?r.a.createElement(c.LinkContainer,{to:"/shipping"},r.a.createElement(s.a.Link,null,r.a.createElement("div",{className:"step-no active"},"2")," ",r.a.createElement("i",{className:"fas fa-shipping-fast"})," Shipping")):r.a.createElement(s.a.Link,{disabled:!0},r.a.createElement("div",{className:"step-no"},"2")," ",r.a.createElement("i",{className:"fas fa-shipping-fast"})," Shipping")),r.a.createElement(s.a.Item,null,n?r.a.createElement(c.LinkContainer,{to:"/payment"},r.a.createElement(s.a.Link,null,r.a.createElement("div",{className:"step-no active"},"3"),r.a.createElement("i",{className:"fas fa-money-bill-alt"})," Payment")):r.a.createElement(s.a.Link,{disabled:!0},r.a.createElement("div",{className:"step-no"},"3"),r.a.createElement("i",{className:"fas fa-money-bill-alt"})," Payment")),r.a.createElement(s.a.Item,null,l?r.a.createElement(c.LinkContainer,{to:"/placeorder"},r.a.createElement(s.a.Link,null,r.a.createElement("div",{className:"step-no active"},"4")," ",r.a.createElement("i",{class:"fas fa-clipboard-check"})," Place Order")):r.a.createElement(s.a.Link,{disabled:!0},r.a.createElement("div",{className:"step-no"},"4")," ",r.a.createElement("i",{class:"fas fa-clipboard-check"})," Place Order")))}},661:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),c=a(164),l=a(106),i=a(218),o=a(155),p=a(168),u=a(107),m=a(22),d=a(50),f=a(221),h=a(201),v=a(10);t.default=function(e){var t=e.history,a=Object(m.b)(),E=Object(m.c)((function(e){return e.userLogin})).userInfo,y=Object(m.c)((function(e){return e.cart})),b=function(e){return(Math.round(100*e)/100).toFixed(2)};y.itemsPrice=b(y.cartItems.reduce((function(e,t){return e+t.price*t.qty}),0)),y.shippingPrice=b(y.itemsPrice>100?0:100),y.taxPrice=b(Number((.15*y.itemsPrice).toFixed(2))),y.totalPrice=Number(y.itemsPrice).toFixed(2);var g=Object(m.c)((function(e){return e.orderCreate})),k=g.order,N=g.success,x=g.error;Object(n.useEffect)((function(){N&&(t.push("/order/".concat(k._id)),a({type:v.c}))}),[t,N]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{step1:!0,step2:!0,step3:!0,step4:!0}),r.a.createElement(c.a,null,r.a.createElement(l.a,{md:8},r.a.createElement(i.a,{variant:"flush"},r.a.createElement(i.a.Item,null,r.a.createElement("h2",null,"Shipping"),r.a.createElement("p",null,r.a.createElement("strong",null,"Address:"),y.shippingAddress.address,", ",y.shippingAddress.city," ",y.shippingAddress.postalCode,","," ",y.shippingAddress.country)),r.a.createElement(i.a.Item,null,r.a.createElement("h2",null,"Payment Method"),r.a.createElement("strong",null,"Method: "),y.paymentMethod),r.a.createElement(i.a.Item,null,r.a.createElement("h2",null,"Order Items"),0===y.cartItems.length?r.a.createElement(d.a,null,"Your cart is empty"):r.a.createElement(i.a,{variant:"flush"},y.cartItems.map((function(e,t){return r.a.createElement(i.a.Item,{key:t},r.a.createElement(c.a,null,r.a.createElement(l.a,{xs:3,md:1},r.a.createElement(o.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})),r.a.createElement(l.a,{xs:5},r.a.createElement(s.Link,{to:"/product/".concat(e.product)},e.name)),r.a.createElement(l.a,{xs:4,md:4},e.qty," x ",r.a.createElement("span",null,"\u20b1"),e.price," = ",r.a.createElement("span",null,"\u20b1"),(e.qty*e.price).toFixed(2))))})))))),r.a.createElement(l.a,{md:4},r.a.createElement(p.a,null,r.a.createElement(i.a,{variant:"flush"},r.a.createElement(i.a.Item,null,r.a.createElement("h2",null,"Order Summary")),r.a.createElement(i.a.Item,null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,"Items"),r.a.createElement(l.a,null,r.a.createElement("span",null,"\u20b1"),y.itemsPrice))),r.a.createElement(i.a.Item,null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,"Shipping"),r.a.createElement(l.a,null,y.shippingPrice>0&&r.a.createElement("span",null,"\u20b1"),0===y.shippingPrice&&"Free"))),r.a.createElement(i.a.Item,null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,r.a.createElement("strong",null,"Total")),r.a.createElement(l.a,null,r.a.createElement("span",null,"\u20b1"),y.totalPrice))),x&&r.a.createElement(i.a.Item,null,r.a.createElement(d.a,{variant:"danger"},x)),r.a.createElement(i.a.Item,null,r.a.createElement(u.a,{type:"button",className:"btn-block",disabled:0===y.cartItems,onClick:function(){a(Object(h.a)({user:E._id,orderItems:y.cartItems,firstName:E.firstName,middleName:E.middleName,lastName:E.lastName,phone:E.phone,email:E.email,shippingAddress:y.shippingAddress,paymentMethod:y.paymentMethod.toLowerCase(),shippingPrice:y.shippingPrice,totalPrice:y.totalPrice,orderStatus:"pending",orderFrom:"website"})),a(Object(h.e)()),console.log({orderItems:y.cartItems,firstName:E.firstName,middleName:E.middleName,lastName:E.lastName,phone:E.phone,shippingAddress:y.shippingAddress,paymentMethod:y.paymentMethod,shippingPrice:y.shippingPrice,totalPrice:y.totalPrice,orderStatus:"pending",orderFrom:"website"})}},"Place Order")))))))}}}]);