(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[12],{201:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"g",(function(){return y})),a.d(t,"c",(function(){return v})),a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return b}));var n=a(9),r=a.n(n),o=a(14),c=a(15),s=a.n(c),i=a(38),u=a(10),l=a(34),p=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,c,p,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:u.b}),o={withCredentials:!0,headers:{"Content-Type":"application/json"}},t.next=5,s.a.post("/api/orders",e,o);case 5:c=t.sent,p=c.data,a({type:u.d,payload:p}),a({type:i.b,payload:p}),localStorage.removeItem("cartItems"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(l.f)()),a({type:u.a,payload:d});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,c,i,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:u.e}),o={withCredentials:!0},t.next=5,s.a.delete("/api/orders/".concat(e),o);case 5:c=t.sent,i=c.data,a({type:u.f,payload:i}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,a({type:u.y,payload:l});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},f=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n,o){var c,i,p,d;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:u.z}),c={withCredentials:!0},a.next=5,s.a.patch("/api/orders/".concat(e),t,c);case 5:i=a.sent,p=i.data,n({type:u.B,payload:p}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),"Not authorized, token failed"===(d=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message)&&n(Object(l.f)()),n({type:u.y,payload:d});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,c,i,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:u.l}),o={withCredentials:!0},t.next=5,s.a.get("/api/orders/".concat(e),o);case 5:c=t.sent,i=c.data,a({type:u.m,payload:i}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(p=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(l.f)()),a({type:u.k,payload:p});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},y=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n,o){var c,i,p,d;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:u.v}),c={withCredentials:!0,headers:{"Content-Type":"application/json"}},a.next=5,s.a.put("/api/orders/".concat(e,"/pay"),t,c);case 5:i=a.sent,p=i.data,n({type:u.x,payload:p}),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),"Not authorized, token failed"===(d=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message)&&n(Object(l.f)()),n({type:u.u,payload:d});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,c,i,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:u.h}),o={withCredentials:!0},t.next=5,s.a.put("/api/orders/".concat(e._id,"/deliver"),{},o);case 5:c=t.sent,i=c.data,a({type:u.j,payload:i}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(p=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(l.f)()),a({type:u.g,payload:p});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},h=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t,a){var n,o,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:u.p}),n={withCredentials:!0},e.next=5,s.a.get("/api/orders/myorders",n);case 5:o=e.sent,c=o.data,t({type:u.r,payload:c}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),"Not authorized, token failed"===(i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(Object(l.f)()),t({type:u.o,payload:i});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,c,i,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:u.s}),o={withCredentials:!0,params:e},t.next=5,s.a.get("/api/orders",o);case 5:c=t.sent,i=c.data.orders,a({type:u.t,payload:i}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),"Not authorized, token failed"===(p=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&a(Object(l.f)()),a({type:u.n,payload:p});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}},218:function(e,t,a){"use strict";var n=a(1),r=a(2),o=a(4),c=a.n(o),s=a(0),i=a.n(s),u=(a(42),a(23)),l=a(5),p=a(74),d=a(73),f=a(17),m={variant:void 0,active:!1,disabled:!1},y=i.a.forwardRef((function(e,t){var a=e.bsPrefix,o=e.active,u=e.disabled,p=e.className,m=e.variant,y=e.action,v=e.as,h=e.eventKey,b=e.onClick,g=Object(r.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);a=Object(l.a)(a,"list-group-item");var E=Object(s.useCallback)((function(e){if(u)return e.preventDefault(),void e.stopPropagation();b&&b(e)}),[u,b]);return i.a.createElement(d.a,Object(n.a)({ref:t},g,{eventKey:Object(f.b)(h||null,g.href),as:v||(y?g.href?"a":"button":"div"),onClick:E,className:c()(p,a,o&&"active",u&&"disabled",m&&a+"-"+m,y&&a+"-action")}))}));y.defaultProps=m,y.displayName="ListGroupItem";var v=y,h={variant:void 0,horizontal:void 0},b=i.a.forwardRef((function(e,t){var a,o=Object(u.a)(e,{activeKey:"onSelect"}),s=o.className,d=o.bsPrefix,f=o.variant,m=o.horizontal,y=o.as,v=void 0===y?"div":y,h=Object(r.a)(o,["className","bsPrefix","variant","horizontal","as"]),b=Object(l.a)(d,"list-group");return a=m?!0===m?"horizontal":"horizontal-"+m:null,i.a.createElement(p.a,Object(n.a)({ref:t},h,{as:v,className:c()(s,b,f&&b+"-"+f,a&&b+"-"+a)}))}));b.defaultProps=h,b.displayName="ListGroup",b.Item=v;t.a=b},430:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalButton=void 0;var n=c(a(0)),r=c(a(24)),o=c(a(3));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=l(this,p(t).call(this,e))).state={isSdkReady:!1},a}var a,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),a=t,(o=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var a=this.props,n=a.currency,r=a.options,o=a.amount,c=a.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:n||(r&&r.currency?r.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:c}})}},{key:"onApprove",value:function(e,t){var a=this;return t.order.capture().then((function(t){if(a.props.onSuccess)return a.props.onSuccess(t,e)})).catch((function(e){if(a.props.catchError)return a.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.amount,o=t.onSuccess,c=t.createOrder,s=t.createSubscription,u=t.onApprove,l=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var p=window.paypal.Buttons.driver("react",{React:n.default,ReactDOM:r.default}),d=a&&!c?function(t,a){return e.createOrder(t,a)}:function(e,t){return c(e,t)};return n.default.createElement(p,i({},this.props,{createOrder:s?void 0:d,createSubscription:s,onApprove:o?function(t,a){return e.onApprove(t,a)}:function(e,t){return u(e,t)},style:l}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,a=t.options,n=t.onButtonReady,r=[];Object.keys(a).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();r.push("".concat(t,"=").concat(a[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(r.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),n&&n()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(a.prototype,o),c&&u(a,c),t}(n.default.Component);t.PayPalButton=m,f(m,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),f(m,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},662:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),o=a(14),c=a(72),s=a(0),i=a.n(s),u=a(22),l=a(15),p=a.n(l),d=a(170),f=a.n(d),m=a(430),y=a(18),v=a(164),h=a(106),b=a(218),g=a(155),E=a(168),w=a(107),O=a(50),j=a(37),k=a(201),P=a(10);t.default=function(e){var t,a=e.match,n=e.history,l=a.params.id,d=Object(s.useState)(!1),x=Object(c.a)(d,2),S=x[0],C=x[1],N=Object(u.b)(),I=Object(u.c)((function(e){return e.orderDetails})),_=I.order,A=I.loading,D=I.error,M=Object(u.c)((function(e){return e.orderPay})),T=M.loading,z=M.success,R=Object(u.c)((function(e){return e.orderDeliver})),B=R.loading,L=R.success,Y=Object(u.c)((function(e){return e.userLogin})).userInfo;if(!A){_.itemsPrice=(t=_.orderItems.reduce((function(e,t){return e+t.price*t.qty}),0),(Math.round(100*t)/100).toFixed(2))}Object(s.useEffect)((function(){Y||n.push("/login");var e=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/config/paypal");case 2:t=e.sent,a=t.data,(n=document.createElement("script")).type="text/javascript",n.src="https://www.paypal.com/sdk/js?client-id=".concat(a,"&currency=PHP"),n.async=!0,n.onload=function(){C(!0)},document.body.appendChild(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!_||z||L||_._id!==l?(N({type:P.w}),N({type:P.i}),N(Object(k.d)(l))):_.isPaid||(window.paypal?C(!0):e())}),[n,Y,N,l,z,L,_]);return A?i.a.createElement(j.a,null):D?i.a.createElement(O.a,{variant:"danger"},D):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{className:"order-screen-id"},"Order ",_._id),i.a.createElement(v.a,null,i.a.createElement(h.a,{md:8},i.a.createElement(b.a,{variant:"flush"},i.a.createElement(b.a.Item,null,i.a.createElement("h2",null,"Shipping"),i.a.createElement("p",null,i.a.createElement("strong",null,"Name: ")," ","".concat(_.firstName," ").concat(_.lastName)),i.a.createElement("p",null,i.a.createElement("strong",null,"Email: ")," ",i.a.createElement("a",{href:"mailto:".concat(_.email)},_.email)),i.a.createElement("p",null,i.a.createElement("strong",null,"Address:"),_.shippingAddress.address,", ",_.shippingAddress.city," ",_.shippingAddress.province,","," ",_.shippingAddress.postalCode,","," ",_.shippingAddress.country),_.isDelivered?i.a.createElement(O.a,{variant:"success"},"Delivered on"," ",f()(_.deliveredAt).format("MM-DD-YYYY h:mmA")):i.a.createElement(O.a,{variant:"danger"},"Not Delivered")),i.a.createElement(b.a.Item,null,i.a.createElement("h2",null,"Payment Method"),i.a.createElement("p",null,i.a.createElement("strong",null,"Method: "),_.paymentMethod),_.isPaid?i.a.createElement(O.a,{variant:"success"},"Paid on ",f()(_.paidAt).format("MM-DD-YYYY h:mmA")):"cash on delivery"!==_.paymentMethod.toLowerCase()&&i.a.createElement(O.a,{variant:"danger"},"Not Paid")),i.a.createElement(b.a.Item,null,i.a.createElement("h2",null,"Order Items"),0===_.orderItems.length?i.a.createElement(O.a,null,"Order is empty"):i.a.createElement(b.a,{variant:"flush"},_.orderItems.map((function(e,t){return i.a.createElement(b.a.Item,{key:t},i.a.createElement(v.a,null,i.a.createElement(h.a,{xs:3,md:1},i.a.createElement(g.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})),i.a.createElement(h.a,{xs:5},i.a.createElement(y.Link,{to:"/product/".concat(e.product)},e.name)),i.a.createElement(h.a,{xs:4,md:4},e.qty," x"," ",i.a.createElement("span",{className:"currency"},e.price," ")," ",i.a.createElement("span",{className:"currency"},e.qty*e.price," "))))})))))),i.a.createElement(h.a,{md:4},i.a.createElement(E.a,null,i.a.createElement(b.a,{variant:"flush"},i.a.createElement(b.a.Item,null,i.a.createElement("h2",null,"Order Summary")),i.a.createElement(b.a.Item,null,i.a.createElement(v.a,null,i.a.createElement(h.a,null,"Items"),i.a.createElement(h.a,null,i.a.createElement("span",null,"\u20b1"),_.itemsPrice))),i.a.createElement(b.a.Item,null,i.a.createElement(v.a,null,i.a.createElement(h.a,null,"Shipping"),i.a.createElement(h.a,null,_.shippingPrice>0&&i.a.createElement("span",null,"\u20b1"),0===_.shippingPrice?"Free":_.shippingPrice.toFixed(2)))),i.a.createElement(b.a.Item,null,i.a.createElement(v.a,null,i.a.createElement(h.a,null,"Total"),i.a.createElement(h.a,null,i.a.createElement("span",null,"\u20b1"),_.totalPrice))),!_.isPaid&&"paypal"===_.paymentMethod.toLowerCase()&&i.a.createElement(b.a.Item,null,T&&i.a.createElement(j.a,null),S?i.a.createElement(m.PayPalButton,{amount:_.totalPrice,options:{currency:"PHP"},onSuccess:function(e){console.log(e),N(Object(k.g)(l,e))}}):i.a.createElement(j.a,null)),B&&i.a.createElement(j.a,null),Y&&Y.isAdmin&&!_.isDelivered&&i.a.createElement(b.a.Item,null,i.a.createElement(w.a,{type:"button",className:"btn btn-block",onClick:function(){N(Object(k.c)(_))}},"Mark As Delivered")))),"pending"===_.orderStatus&&"client"===Y.role.toLowerCase()&&i.a.createElement(E.a,{className:"order-success__wrapper"},i.a.createElement(E.a.Body,null," ",i.a.createElement(O.a,{variant:"success"},"Thank you for ordering! ",i.a.createElement("br",null)," Our agent will contact you soon!"))))))}}}]);